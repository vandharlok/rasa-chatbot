version: "3.1"

actions:
  - action_custom_fallback
  - action_default_fallback
  - action_show_buttons
  - action_salvar_cadastro
  - action_add_event
  - action_find_free_slots
  - action_find_slots_for_specific_date
  - action_modify_google_calendar_event  
  - action_delete_google_calendar_event
  - validate_event_form
  - validate_delete_event_form
  - validate_modify_event_form
  - validate_cadastro_form
  - action_reset_all
  - action_restart
  - action_store_feedback

entities:
  - time
  - feedback

intents:
  - diversao
  - saudações  
  - marcar_consulta
  - remarcar_consulta
  - concordancia
  - cancelar_consulta
  - resultado_de_exames
  - saber_local_de_atendimento
  - solicitar_receita
  - solicitar_atestado
  - verificar_plano_de_saude
  - preco_consulta
  - informacoes_sobre_servico
  - iniciar_cadastro
  - negacao
  - perguntar_dias_livres
  - checar_disponibilidade
  - metodo_de_pagamento
  - duvida
  - provide_feedback


slots:
  feedback:
    type: float
    influence_conversation: false
    mappings:
    - type: custom
  time:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: time
      - type: from_entity
        entity: time
        conditions:    
        - active_loop: event_form
          requested_slot: time    
        - active_loop:  modify_event_form
          requested_slot: time    
  nome:   
    type: text
    influence_conversation: false
    mappings:
    - type: from_text
      conditions:
       - active_loop: cadastro_form
         requested_slot: nome
  data_nascimento:
    type: text
    influence_conversation: false
    mappings:
    - type: from_text
      conditions:
       - active_loop: cadastro_form
         requested_slot: data_nascimento
  cpf:
    type: text
    influence_conversation: false
    mappings:
    - type: from_text
      conditions:
        - active_loop: cadastro_form
          requested_slot: cpf
    - type: from_text
      conditions:
        - active_loop: event_form
          requested_slot: cpf
    - type: from_text
      conditions:
        - active_loop: modify_event_form
          requested_slot: cpf
    - type: from_text
      conditions:
        - active_loop: delete_event_form
          requested_slot: cpf
  email:
    type: text
    influence_conversation: false
    mappings:
    - type: from_text
      conditions:
       - active_loop: cadastro_form
         requested_slot: email
  telefone:
    type: text
    influence_conversation: false
    mappings:
    - type: from_text
      conditions:
      - active_loop: cadastro_form
        requested_slot: telefone
  free_slots:
    type: list
    influence_conversation: false
    mappings:
    - type: custom
  event_id:
    type: text
    influence_conversation: false
    mappings:
    - type: custom
  fallback_count:
    type: float
    influence_conversation: false 
    initial_value: 0.0
    mappings:
    - type: custom
  event_completed:
    type: bool
    influence_conversation: true
    initial_value: false
    mappings:
    - type: custom
  event_modify_completed:
    type: bool
    influence_conversation: true
    initial_value: false
    mappings:
    - type: custom
  event_delete_completed:
    type: bool
    influence_conversation: true
    initial_value: false
    mappings:
    - type: custom
  form_completed:
    type: bool
    influence_conversation: true
    initial_value: false
    mappings:
    - type: custom
  login_sucess:
    type: bool
    influence_conversation: true
    initial_value: false
    mappings:
    - type: custom
  cpf_validate:
    type: bool
    influence_conversation: true
    initial_value: false
    mappings:
    - type: custom


  #parte de teste
  
  
  
  



  

forms:
  cadastro_form:
    required_slots:
    - nome
    - cpf
    - data_nascimento
    - email
    - telefone
  event_form:
    required_slots:
    - cpf
    - time
   
  modify_event_form:
    required_slots:
    - cpf
    - time
  delete_event_form:
    required_slots:
    - cpf

  
  


  


responses:
  utter_metodo_de_pagamento:
  - text: |
      Oferecemos as seguintes opções de pagamento:
      - Pix
      - Dinheiro
      - Cartão de débito
      - Cartão de crédito (em até 3x sem juros)

  utter_ask_delete_event_form_cpf:
    - text: "Você poderia me fornecer seu CPF para que possamos continuar?"
    - text: "Para seguirmos adiante, me informe seu CPF, por favor."

  utter_ask_modify_event_form_cpf:
    - text: "Poderia confirmar seu CPF para verificarmos seu cadastro?"
    - text: "Por gentileza, insira seu CPF para que possamos confirmar suas informações."

  utter_ask_modify_event_form_time:
    - text: "Para qual data você gostaria de remarcar?"

  utter_free_slots:
    - text: "Os proximos horarios disponiveis sao: {free_slots}"

  utter_ask_rephrase:
    - text: "Parece que não entendi bem. Poderia explicar novamente?"
    - text: "Me desculpe, não captei o que você disse. Você poderia repetir?"

  utter_fail_sign:
    - text: Desculpe não conseguimos te cadastrar em nosso sistema, parece que houve um erro. Tente novamente mais tarde!
  

  utter_success_sign:
    - text: Cadastro concluído com sucesso!


  utter_confirm_modification:
    - text: "A data da sua consulta foi alterada com sucesso!"
    
  utter_ask_event_form_cpf:
  - text: Poderia informar seu CPF corretamente para confirmamos seu cadastro?  

  utter_confirm_appointment:
  - text: "Deseja agendar?"

  utter_default:
  - text: Desculpe, não entendi o que deseja

  utter_ask_event_form_time:
  - text: |
      Qual dia e horário seria melhor pra você?
      Você pode perguntar os proximos dias disponíveis ou também um mês, dia específico do mês

  utter_show_options:
  - text: No que posso te ajudar?
    buttons:
      - title: "Marcar uma consulta"
        payload: "/marcar_consulta"
      - title: "Remarcar uma consulta"
        payload: "/remarcar_consulta"
      - title: "Cancelar uma consulta"
        payload: "/cancelar_consulta"
      - title: "Tirar Dúvida"
        payload: "/duvida"

  utter_ask_cadastro_form_nome:
  - text: "Para começarmos, poderia nos contar seu nome completo?"
  - text: "Antes de tudo, me diga seu nome completo, por favor?"

  utter_inform_form:
  - text: "Para usar dos nossos serviços você deve fazer um pequeno cadastro com a gente"

  utter_duvida:
  - text: Que dúvida você tem sobre nossos serviços?
    buttons:
      - title: "Preços"
        payload: "/preco_consulta"
      - title: "Local de atendimento"
        payload: "/saber_local_de_atendimento"
      - title: "Planos de saúde"
        payload: "/verificar_plano_de_saude"
      - title: "Serviços oferecidos"
        payload: "/informacoes_sobre_servico" 
      - title: "Formas de pagamento"
        payload: "/metodo_de_pagamento" 
      - title: "Falar com atendente"
        payload: "/informacoes_sobre_servico" 




  utter_ask_cadastro_form_data_nascimento:
  - text: "Qual é a sua data de nascimento?"

  utter_ask_cadastro_form_cpf:
  - text: "Agora, informe seu CPF"
  - text: "Por favor, agora digite seu CPF"

  utter_informacoes_sobre_servico:
  - text: |
      Oferecemos uma ampla gama de serviços para promover seu bem-estar e saúde mental, incluindo:
      Terapia Individual
      Consulta com Psiquiatra
      Consulta com Psicólogo
      Terapia Cognitiva Comportamental
      Psicoterapia Online
      Terapia de Casal




  utter_ask_cadastro_form_email:
    - text: "Informe seu email"
    - text: "Agora informe seu email"
    - text: "Por favor, informe seu email"

  utter_ask_cadastro_form_telefone:
  - text: "Por fim, informe seu telefone celular"
  - text: "Agora para finalizarmos, informe seu número de celular"
  - text: "Por favor, agora informe seu número de celular para finalizarmos seu cadastro"


  utter_inicia_cadastro:
    - text: "Você deseja se cadastrar?"

  utter_verifica_cadastro: 
    - text: "Você é já é cadastrado?"
    - text: "Você já possui um cadastro?"
    - text: "Para darmos inicio, você já é cadastrado?"

  utter_submit:
  - text: "Muito obrigado, tenha um ótimo dia!"

  utter_saudações:
  - text: "Olá! Bem-vindo à nossa clínica."


  utter_preco_consulta:
  - text: O preço de nossas consultas é R$450,00 

  utter_marcar_consulta: 
  - text: Deseja marcar uma consulta conosco?

  utter_cancelar_consulta:
  - text: Voce deseja cancelar sua consulta agendada conosco?

  utter_remarcar_consulta:
  - text: Deseja remarcar a data da consulta ?

  utter_terminar_conversa:
  - text: Há mais alguma coisa com que eu possa te ajudar?
  - text: Posso te ajudar com mais alguma coisa?


  utter_final:
  - text: Muito obrigado pela preferência {nome}, poderia avaliar nossa conversa de 1 a 5? 
  - text: Obrigado pela preferência {nome}, poderia avaliar nossa conversa de 1 a 5? 

  utter_verificar_plano_de_saude:
  - text: |
      Nossa clínica aceita os seguintes planos de saúde:
      Por favor, verifique se o seu plano está listado abaixo:
      - AmePlan
      - Ampla Saúde
      
  utter_desmarcar_consulta:
  - text: Consulta desmarcada!
  - text: Seu agendamento foi desmarcado!

  utter_saber_local_de_atendimento:
  - text: Nossa clinica fica na Avenida das Torres n° 278, São Paulo-SP


session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true