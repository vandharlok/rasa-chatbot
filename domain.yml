version: "3.1"

actions:
  - action_custom_fallback
  - action_default_fallback
  - action_show_buttons
  - action_salvar_cadastro
  - action_add_event
  - action_find_free_slots
  - action_find_slots_for_specific_date
  - action_modify_google_calendar_event  
  - action_delete_google_calendar_event
  - validate_event_form
  - validate_delete_event_form
  - validate_modify_event_form
  - validate_cadastro_form
  - action_reset_all
  - action_store_feedback

entities:
  - time
  - feedback

intents:
  - saudações  
  - marcar_consulta
  - remarcar_consulta
  - concordancia
  - cancelar_consulta
  - saber_local_de_atendimento
  - verificar_plano_de_saude
  - preco_consulta
  - informacoes_sobre_servico
  - iniciar_cadastro
  - negacao
  - perguntar_dias_livres
  - metodo_de_pagamento
  - duvida
  - provide_feedback


slots:
  feedback:
    type: float
    influence_conversation: false
    mappings:
    - type: custom
  time:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: time
      - type: from_entity
        entity: time
        conditions:    
        - active_loop: event_form
          requested_slot: time    
        - active_loop:  modify_event_form
          requested_slot: time    
  nome:   
    type: text
    influence_conversation: false
    mappings:
    - type: from_text
      conditions:
       - active_loop: cadastro_form
         requested_slot: nome
  data_nascimento:
    type: text
    influence_conversation: false
    mappings:
    - type: from_text
      conditions:
       - active_loop: cadastro_form
         requested_slot: data_nascimento
  cpf:
    type: text
    influence_conversation: false
    mappings:
    - type: from_text
      conditions:
        - active_loop: cadastro_form
          requested_slot: cpf
    - type: from_text
      conditions:
        - active_loop: event_form
          requested_slot: cpf
    - type: from_text
      conditions:
        - active_loop: modify_event_form
          requested_slot: cpf
    - type: from_text
      conditions:
        - active_loop: delete_event_form
          requested_slot: cpf
  email:
    type: text
    influence_conversation: false
    mappings:
    - type: from_text
      conditions:
       - active_loop: cadastro_form
         requested_slot: email
  telefone:
    type: text
    influence_conversation: false
    mappings:
    - type: from_text
      conditions:
      - active_loop: cadastro_form
        requested_slot: telefone
  free_slots:
    type: list
    influence_conversation: false
    mappings:
    - type: custom
  event_id:
    type: text
    influence_conversation: false
    mappings:
    - type: custom
  fallback_count:
    type: float
    influence_conversation: false 
    initial_value: 0.0
    mappings:
    - type: custom
  event_completed:
    type: bool
    influence_conversation: true
    initial_value: false
    mappings:
    - type: custom
  event_modify_completed:
    type: bool
    influence_conversation: true
    initial_value: false
    mappings:
    - type: custom
  event_delete_completed:
    type: bool
    influence_conversation: true
    initial_value: false
    mappings:
    - type: custom
  form_completed:
    type: bool
    influence_conversation: true
    initial_value: false
    mappings:
    - type: custom
  login_sucess:
    type: bool
    influence_conversation: true
    initial_value: false
    mappings:
    - type: custom
  cpf_validate:
    type: bool
    influence_conversation: true
    initial_value: false
    mappings:
    - type: custom


forms:
  cadastro_form:
    required_slots:
    - nome
    - cpf
    - data_nascimento
    - email
    - telefone
  event_form:
    required_slots:
    - cpf
    - time
   
  modify_event_form:
    required_slots:
    - cpf
    - time
  delete_event_form:
    required_slots:
    - cpf

  
  


  


responses:
  utter_metodo_de_pagamento:
    - text: "Aceitamos diversas formas de pagamento, incluindo Pix, dinheiro, e cartões de débito e crédito, com possibilidade de parcelar em até 3 vezes sem juros"

  utter_ask_delete_event_form_cpf:
    - text: Você poderia me passar seu CPF para que possamos continuar?

  utter_ask_modify_event_form_cpf:
    - text: Só para confirmar, você poderia digitar seu CPF novamente? Quero garantir que temos tudo certinho aqui
 

  utter_ask_modify_event_form_time:
    - text: Para qual data você gostaria de remarcar?

  utter_ask_rephrase:
    - text: Ops, acho que não entendi. Você poderia repetir?

  utter_fail_sign:
    - text: Desculpe não conseguimos te cadastrar em nosso sistema, parece que houve um erro. Tente novamente mais tarde!
  

  utter_success_sign:
    - text: E tá tudo certo! Seu cadastro foi concluído com sucesso


  utter_confirm_modification:
    - text: Tudo certo! Sua consulta foi remarcada. Nos vemos no novo dia!
    
  utter_ask_event_form_cpf:
    - text: Poderia me passar seu CPF? Precisamos dele para te identificar no nosso sistema

  utter_confirm_appointment:
    - text: Deseja agendar?

  utter_default:
    - text: Desculpe, não entendi o que deseja

  utter_ask_event_form_time:
    - text:  Qual dia e horário ficam melhores pra você? Se quiser, pode perguntar os próximos horários disponíveis, ou você escolhe um mês ou dia específico

  utter_show_options:
    - text: No que posso te ajudar?
      buttons:
        - title: "Marcar uma consulta"
          payload: "/marcar_consulta"
        - title: "Remarcar uma consulta"
          payload: "/remarcar_consulta"
        - title: "Cancelar uma consulta"
          payload: "/cancelar_consulta"
        - title: "Tirar Dúvida"
          payload: "/duvida"

  utter_ask_cadastro_form_nome:
    - text: Antes de tudo, me diga seu nome completo, por favor?

  utter_inform_form:
    - text: Para usar dos nossos serviços você deve fazer um pequeno cadastro com a gente

  utter_duvida:
    - text: Que dúvida você tem sobre nossos serviços?
      buttons:
        - title: "Preços"
          payload: "/preco_consulta"
        - title: "Local de atendimento"
          payload: "/saber_local_de_atendimento"
        - title: "Planos de saúde"
          payload: "/verificar_plano_de_saude"
        - title: "Serviços oferecidos"
          payload: "/informacoes_sobre_servico" 
        - title: "Formas de pagamento"
          payload: "/metodo_de_pagamento" 
        - title: "Falar com atendente"
          payload: "/informacoes_sobre_servico" 



  utter_ask_cadastro_form_data_nascimento:
    - text: Qual é a sua data de nascimento?

  utter_ask_cadastro_form_cpf:
    - text: Me passa seu CPF? Precisamos dele para te identificar no nosso sistema

  utter_informacoes_sobre_servico:
    - text: "Aqui na clínica, temos um monte de coisas boas para você: desde terapia individual até sessões com psiquiatra, psicólogo, terapias comportamentais e até psicoterapia online"




  utter_ask_cadastro_form_email:
    - text: Agora informe seu email

  utter_ask_cadastro_form_telefone:
    - text: Por fim, informe seu telefone celular

  utter_inicia_cadastro:
    - text: Você deseja se cadastrar?

  utter_verifica_cadastro: 
    - text: Só pra checar, você já tem cadastro com a gente?

  utter_submit:
    - text: Muito obrigado, tenha um ótimo dia!

  utter_saudações:
    - text: Oi! Que bom te ver por aqui!!!

  utter_preco_consulta:
    - text: Nossas consultas custam R$450,00

  utter_marcar_consulta: 
    - text: Deseja marcar uma consulta conosco?

  utter_cancelar_consulta:
    - text: Voce deseja cancelar sua consulta agendada conosco?

  utter_remarcar_consulta:
    - text: Deseja remarcar a data da consulta ?

  utter_terminar_conversa:
    - text: Mais alguma coisa que posso fazer por você hoje?

  utter_final:
    - text: Obrigado pela preferência! Que tal dar uma nota de 1 a 5 para o nosso papo de hoje?
   
  utter_verificar_plano_de_saude:
    - text: |
        Nossa clínica aceita os seguintes planos de saúde:
        Por favor, verifique se o seu plano está listado abaixo:
        - AmePlan
        - Ampla Saúde
      
  utter_desmarcar_consulta:
    - text: Seu agendamento foi desmarcado!

  utter_saber_local_de_atendimento:
    - text: Nossa clinica fica na Avenida das Torres n° 278, São Paulo-SP


session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: false
